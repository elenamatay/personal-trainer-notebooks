<<<<<<< HEAD
# Note: code gotten from _pydev_imports_tipper.

import sys


=======
#Note: code gotten from _pydev_imports_tipper.

import sys

>>>>>>> 18d7037cf30f05fb9c835180cb251f94a7f2d64c
def _imp(name, log=None):
    try:
        return __import__(name)
    except:
<<<<<<< HEAD
        if "." in name:
            sub = name[0 : name.rfind(".")]

            if log is not None:
                log.add_content("Unable to import", name, "trying with", sub)
                log.add_exception()

            return _imp(sub, log)
        else:
            s = "Unable to import module: %s - sys.path: %s" % (str(name), sys.path)
            if log is not None:
                log.add_content(s)
                log.add_exception()

            raise ImportError(s)


IS_IPY = False
if sys.platform == "cli":
    IS_IPY = True
    _old_imp = _imp

    def _imp(name, log=None):
        # We must add a reference in clr for .Net
        import clr  # @UnresolvedImport

        initial_name = name
        while "." in name:
            try:
                clr.AddReference(name)
                break  # If it worked, that's OK.
            except:
                name = name[0 : name.rfind(".")]
=======
        if '.' in name:
            sub = name[0:name.rfind('.')]
            
            if log is not None:
                log.add_content('Unable to import', name, 'trying with', sub)
                log.add_exception()
            
            return _imp(sub, log)
        else:
            s = 'Unable to import module: %s - sys.path: %s' % (str(name), sys.path)
            if log is not None:
                log.add_content(s)
                log.add_exception()
            
            raise ImportError(s)
        

IS_IPY = False
if sys.platform == 'cli':
    IS_IPY = True
    _old_imp = _imp
    def _imp(name, log=None):
        #We must add a reference in clr for .Net
        import clr #@UnresolvedImport
        initial_name = name
        while '.' in name:
            try:
                clr.AddReference(name)
                break #If it worked, that's OK.
            except:
                name = name[0:name.rfind('.')]
>>>>>>> 18d7037cf30f05fb9c835180cb251f94a7f2d64c
        else:
            try:
                clr.AddReference(name)
            except:
<<<<<<< HEAD
                pass  # That's OK (not dot net module).

        return _old_imp(initial_name, log)

=======
                pass #That's OK (not dot net module).
        
        return _old_imp(initial_name, log)
    
>>>>>>> 18d7037cf30f05fb9c835180cb251f94a7f2d64c

def import_name(name, log=None):
    mod = _imp(name, log)

<<<<<<< HEAD
    components = name.split(".")
=======
    components = name.split('.')
>>>>>>> 18d7037cf30f05fb9c835180cb251f94a7f2d64c

    old_comp = None
    for comp in components[1:]:
        try:
<<<<<<< HEAD
            # this happens in the following case:
            # we have mx.DateTime.mxDateTime.mxDateTime.pyd
            # but after importing it, mx.DateTime.mxDateTime shadows access to mxDateTime.pyd
=======
            #this happens in the following case:
            #we have mx.DateTime.mxDateTime.mxDateTime.pyd
            #but after importing it, mx.DateTime.mxDateTime shadows access to mxDateTime.pyd
>>>>>>> 18d7037cf30f05fb9c835180cb251f94a7f2d64c
            mod = getattr(mod, comp)
        except AttributeError:
            if old_comp != comp:
                raise
<<<<<<< HEAD

        old_comp = comp

    return mod
=======
        
        old_comp = comp
        
    return mod
    
>>>>>>> 18d7037cf30f05fb9c835180cb251f94a7f2d64c
